console.log('js loaded');
var app=function(){return{}}();$(function(){new app.base}),app.base=function(a,b,c){var d=function(){c.options={},c.options.uAgent=navigator.userAgent,c.options.interaction=c.options.uAgent.match(/(iPad|iPhone|iPod)/g)?"touchstart":"click",e.call(this)},e=function(){this.menu(),this.overlay(),this.filter()};return d.prototype={menu:function(){new c.Nav(a(".desktop-nav"))},overlay:function(){a(".video-trigger").each(function(){a(this).data("overlay",new c.Overlay(this))})},filter:function(){a(".filter-container").each(function(){new c.Filter(this)})}},d}.call(this,jQuery,_,app),app.Filter=function(a,b){var c=function(b){this.relationship=a(b).attr("data-relationship"),this.keys=[],this.$els={item:b,controller:a('.item-select[data-relationship="'+this.relationship+'"]'),items:a(".item-filter",b)},d.call(this)},d=function(){this.setup(),this.bind()};return c.prototype={setup:function(){var c=this;this.$els.items.each(function(){var d=",All";a(this).attr("data-type",a(this).attr("data-type")+d);var e=a(this).attr("data-type").split(",");b.each(e,function(b){return a.inArray(b,c.keys)>-1?!1:void c.keys.push(b)})}),c.keys.sort(),b.each(c.keys,function(a){c.$els.controller.append('<option value="'+a+'">'+a+"</option>")})},bind:function(){var a=this;this.$els.controller.on("change",function(){a.selectFilter()})},selectFilter:function(){var b=this;this.$els.items.each(function(){var c=a(this).data("type").split(","),d=b.$els.controller.val(),e=a.inArray(d,c)>-1;a(this).parent().toggleClass("hide",!e)})}},c}.call(this,jQuery,_,app),app.Nav=function(a){var b=function(b){this.$els={item:a(b),mobile:a(".mobile-nav"),mobilenav:a(".mobile-nav-close")},this.states={open:"is-open"},c.call(this)},c=function(){this.bind()};return b.prototype={bind:function(){var a=this;this.$els.mobile.on("click",function(b){b.preventDefault(),a.open()}),this.$els.mobilenav.on("click",function(b){b.preventDefault(),a.close()})},open:function(){this.$els.mobilenav.addClass(this.states.open),this.$els.item.addClass(this.states.open)},close:function(){this.$els.mobilenav.removeClass(this.states.open),this.$els.item.removeClass(this.states.open)}},b}(jQuery,_,app),app.Overlay=function(a){var b=function(b){this.$els={item:a(b)},this.$overlay=a(".overlay"),this.$close=a(".close",this.$overlay),this.states={active:"active"},c.call(this)},c=function(){this.bind()};return b.prototype={bind:function(){var b=this;this.$els.item.on("click",function(c){c.preventDefault(),b.open(a(this).attr("data-rel"))}),this.$overlay.on("click",function(){b.close()}),this.$close.on("click",function(){b.close()}),a(document).on("keyup",function(a){27==a.keyCode&&b.close()})},open:function(b){var c=a(".overlay-content");c.append(a('<iframe src="http://player.vimeo.com/video/'+b+'?title=0&amp;byline=0&amp;portrait=0&amp;autoplay=1" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>')),this.$overlay.addClass(this.states.active),this.$overlay.append(this.movie),a("body").css("overflow","hidden")},close:function(){a("iframe").remove(),this.$overlay.removeClass(this.states.active),a("body").css("overflow","")}},b}(jQuery,_,app);